<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Pracownicy firmy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
<div class="container mt-5">
    <h2 th:text="'Pracownicy firmy: ' + ${company.name}"></h2>
    <div class="d-flex justify-content-between align-items-center mb-3">
        <a th:href="@{/companies}" class="btn btn-secondary">← Powrót do listy firm</a>
        <a th:href="@{/companies/{companyId}/employees/new(companyId=${company.id})}" class="btn btn-success">
            + Dodaj pracownika
        </a>
    </div>

    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Imię</th>
            <th>Nazwisko</th>
            <th>Email</th>
            <th>Telefon</th>
            <th>Akcje</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employee : ${employeesPage.content}">
            <td th:text="${employee.firstName}">Jan</td>
            <td th:text="${employee.lastName}">Kowalski</td>
            <td th:text="${employee.email}">jan@example.com</td>
            <td th:text="${employee.phone}">123-456-789</td>
            <td>
                <a th:href="@{/companies/{companyId}/employees/{employeeId}/edit(companyId=${company.id}, employeeId=${employee.id})}"
                   class="btn btn-warning btn-sm me-1">Edytuj</a>

                <form th:action="@{/companies/{companyId}/employees/{employeeId}/delete(companyId=${company.id}, employeeId=${employee.id})}"
                      method="post" style="display:inline;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('Czy na pewno chcesz usunąć tego pracownika?');">Usuń</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <nav>
        <ul class="pagination">
            <li th:classappend="${employeesPage.first} ? 'disabled'">
                <a th:href="@{|/companies/${company.id}/employees?page=${employeesPage.number - 1}|}" class="page-link">Poprzednia</a>
            </li>
            <li th:each="i : ${#numbers.sequence(0, employeesPage.totalPages - 1)}"
                th:classappend="${i == employeesPage.number} ? 'active'">
                <a th:href="@{|/companies/${company.id}/employees?page=${i}|}" th:text="${i + 1}" class="page-link"></a>
            </li>
            <li th:classappend="${employeesPage.last} ? 'disabled'">
                <a th:href="@{|/companies/${company.id}/employees?page=${employeesPage.number + 1}|}" class="page-link">Następna</a>
            </li>
        </ul>
    </nav>
</div>
</body>
</html>
